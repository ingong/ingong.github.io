---
title: '[BOJ 14499] 주사위 굴리기 (Node.js)'
date: 2022-03-18 20:21:13
category: 'PS'
draft: false
---

## 문제

[14499번: 주사위 굴리기](https://www.acmicpc.net/problem/14499)

## 문제 풀이

1. Commands 를 순회하면서 주사위의 위치를 변경시켜준다. 범위에서 벗어난 경우 결과값에 포함시키지 않아야하므로 조건을 확인한다.
2. 주사위를 변경시켜준다. 주사위를 회전시킬 때 실제 주사위를 회전하는게 아닌 해당 index 의 값들을 변경해준다. 크게 4가지 방향이 존재하지만 동, 서 / 북, 남은 규칙이 유사해 변경시킬 배열을 저장하고 이를 조작하는 방식을 사용했다.
3. board 위의 값을 변경시켜준다. 이 때 board 위에 값이 0 인 경우와 0 이 아닌 경우를 나눠서 처리해준다.

## 문제 회고

사실 좀 더 규칙이 있지 않을까하는 막연한 기대로 문제를 1시간30분 정도 푼 것 같다. 결과적으로 잘 구현했지만 과정에서 조금씩 구현의 실수도 생겼다. 오히려 이런 경우에는 하나씩 구현하면서 주사위의 값을 변경하는 방식을 취하는게 더 나은 판단이였던 것 같다.

## 소스 코드

```jsx
// BAEKJOON
// const input = require('fs').readFileSync('/dev/stdin').toString().trim().split('\n');
// VSCODE : TEST_CASE 폴더 생성 후, 원하는 테스트 케이스를 index.txt 에 작성
const input = require('fs')
  .readFileSync('TESTCASE/index.txt')
  .toString()
  .trim()
  .split('\n')
const log = console.log

const solution = input => {
  const [N, M, X, Y, K] = input[0].split(' ').map(Number)
  const board = input.slice(1, 1 + N).map(v => v.split(' ').map(Number))
  const commands = input[input.length - 1].split(' ').map(Number)
  const answer = []
  let position = [X, Y]
  const dice = new Array(6).fill(0)
  const dx = [0, 0, -1, 1] // 동 서 북 남
  const dy = [1, -1, 0, 0]

  for (let i = 0; i < commands.length; i++) {
    const command = commands[i]
    const [cx, cy] = [dx[command - 1], dy[command - 1]]
    const [nx, ny] = [position[0] + cx, position[1] + cy]
    if (nx < 0 || nx >= N || ny < 0 || ny >= M) continue
    changeDice(command) // diceMove
    position = [nx, ny]
    if (board[nx][ny] === 0) {
      board[nx][ny] = dice[5]
    } else {
      dice[5] = board[nx][ny] // 주사위 바닥면으로 해당 수가 복사
      board[nx][ny] = 0 // 칸의 수는 0
    }
    answer.push(dice[0])
  }

  for (const v of answer) log(v)

  function changeDice(command) {
    const vertical = [1, 0, 4, 5]
    const south = [vertical[3], ...vertical.slice(0, 3)]
    const north = [...vertical.slice(1, 4), vertical[0]]
    const horizontal = [0, 2, 5, 3]
    const east = [horizontal[3], ...horizontal.slice(0, 3)]
    const west = [...horizontal.slice(1, 4), horizontal[0]]

    let target, array
    if (command === 3 || command === 4) target = vertical
    else target = horizontal

    switch (command) {
      case 1:
        array = east
        break
      case 2:
        array = west
        break
      case 3:
        array = north
        break
      case 4:
        array = south
        break
      default:
        break
    }
    const temp = target.map(v => dice[v])
    for (let i = 0; i < 4; i++) dice[array[i]] = temp[i]
  }
}

solution(input)
```
