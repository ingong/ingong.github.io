---
title: '[BOJ 12865] 평범한 배낭 (Node.js)'
date: 2022-03-04 16:21:13
category: 'BOJ Code'
draft: false
---

## 문제

[12865번: 평범한 배낭](https://www.acmicpc.net/problem/12865)

## 문제 접근

1시간 정도 고민했지만 세워낸 1차원 DP 점화식으로는 수 많은 반례들이 존재했다. 물건을 순차적으로 탐색할 때 할 수 있는 행동은 크게 2가지로 나뉜다. 만약 물건의 무게가 이전 배낭의 합보다 크다면 배낭에 물건을 넣지 못한다. 물건의 무게가 넘지 않는다면 넣을 수 있다. 과연 물건을 넣는 것이 최대의 가치를 보장할 수 있을까?

```tsx
무게 제한은 5 라고 하자.
const list = [[2, 2], [2, 4], [3, 5]]; // W, V
```

마지막 3번째 물건을 탐색할 때의 최대 가치를 산출하는 과정을 생각해보자. 본인의 물건을 넣었다고 가정하고 이후에 맨 앞부터 순회를 할 것이다. 그렇다면 2 의 무게와 2 의 가치의 물건이 배낭에 들어갈 것이다. 그리고 2 번째에 index 에 있는 물건은 넣을 수 없을 것이다. 이미 무게 제한인 5에 걸렸기 때문이다.

기존 DP 문제와의 차이는 최대 가치를 만들어야할 뿐만 아니라 무게도 고려해야했다. 따라서 DP 배열을 2차원으로 선언해 무게와 가치를 함께 확인해야했다.

점화식을 세워보면 다음과 같다.`dp[n][k]` 항은 n 번째 물건 그리고 최대 k 의 크기만큼까지 탐색한 경우의 최대가치를 나타낸다.

물건을 탐색할 때 우리는 2가지 조건에 부합되게 행동할 수 있다. 먼저 해당 물건의 무게가 제한을 초과한다면 배낭에 넣을 수 없다. 해당 물건의 무게가 제한을 초과하지 않는다면 넣을 수 있다. 하지만 위에 반례에서 살폈듯이 이 물건을 배낭에 넣는 것만이 최적의 해를 보장하지 못한다. 왜냐하면 본인 이후의 물건을 선택했을 때 더 높은 가치의 배낭을 만들 수 있기 때문이다. 점화식을 세워보면 다음과 같다.

```tsx
if (j < w) dp[i][j] = dp[i - 1][j]
else dp[i][j] = Math.max(dp[i - 1][j], dp[i - 1][j - w] + v)
```

`dp[i][j]` 는 배낭에서 w 만큼의 무게를 뺀 항의 가치에서 해당 물건의 가치를 더 해줌으로써 완성할 수 있다.

## 문제 회고

DP 문제는 많이 접해보면서 점화식을 세우는 연습을 해보는게 최선인 것 같다.

## 소스 코드

```tsx
// BAEKJOON
// const input = require('fs').readFileSync('/dev/stdin').toString().trim().split('\n');
// VSCODE : TEST_CASE 폴더 생성 후, 원하는 테스트 케이스를 index.txt 에 작성
const input = require('fs')
  .readFileSync('TEST_CASE/index.txt')
  .toString()
  .trim()
  .split('\n')
const log = console.log

const solution = input => {
  const [N, K] = input[0].split(' ').map(Number)
  const list = [[0, 0], ...input.slice(1).map(v => v.split(' ').map(Number))]
  const dp = Array.from({ length: N + 1 }, () => new Array(K + 1).fill(0))

  for (let i = 1; i < N + 1; i++) {
    const w = list[i][0]
    const v = list[i][1]
    for (let j = 1; j < K + 1; j++) {
      if (j < w) dp[i][j] = dp[i - 1][j]
      else dp[i][j] = Math.max(dp[i - 1][j], dp[i - 1][j - w] + v)
    }
  }

  log(dp[N][K])
}

solution(input)
```
