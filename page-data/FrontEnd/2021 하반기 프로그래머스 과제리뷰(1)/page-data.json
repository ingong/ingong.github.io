{"componentChunkName":"component---src-templates-blog-post-js","path":"/FrontEnd/2021 하반기 프로그래머스 과제리뷰(1)/","result":{"data":{"site":{"siteMetadata":{"title":"Ingong's Log","author":"ingong","siteUrl":"https://ingong.github.io","comment":{"disqusShortName":"","utterances":"ingong/ingong.github.io"},"sponsor":{"buyMeACoffeeId":"ingong"}}},"markdownRemark":{"id":"ac53c561-fbbf-53c0-a52c-69a7619e4be5","excerpt":"이번 토요일에 응시할 예정인 프로그래머스 FE 데브매칭 테스트에 앞서 이전 과제들을 풀어보는 시간을 가졌다. 이 과제는 Vanilla JavaScript, Html, css 만을 활용해 요구사항을 구현하는 과제이다. 너무 오랜만에 Vanilla JavaScript 만을 활용해 구현하다보니 구현에 어려운 지점들이 종종 있었다. 그래도 작년 부스트캠프…","html":"<p>이번 토요일에 응시할 예정인 프로그래머스 FE 데브매칭 테스트에 앞서 이전 과제들을 풀어보는 시간을 가졌다. 이 과제는 Vanilla JavaScript, Html, css 만을 활용해 요구사항을 구현하는 과제이다. 너무 오랜만에 Vanilla JavaScript 만을 활용해 구현하다보니 구현에 어려운 지점들이 종종 있었다. 그래도 작년 부스트캠프 6기에서 고민했던 경험들이 생각나서 좋았던 것 같다.</p>\n<p>이번 과제에서는 컴포넌트 설계, 라우터, 이벤트 핸들링 등 여러 가지 사항을 고민하고 해결했다. 그리고 마지막에는 3시간이라는 제한적인 시간 내에서 효율적인 과제 구현을 위한 고민과 해결도 정리해봤다.</p>\n<p>이 글은 해당 과제에 대한 내용을 알고 있다는 것을 전제로 작성했으므로 문제 내용을 모른다면 이해에 어려움이 있을 것 같다. <a href=\"https://programmers.co.kr/skill_check_assignments/199\">문제</a>를 이해하거나 풀어보고 오면 좋을 것 같다.</p>\n<h2 id=\"1-스크립트-및-파일-불러오기\" style=\"position:relative;\"><a href=\"#1-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EB%B0%8F-%ED%8C%8C%EC%9D%BC-%EB%B6%88%EB%9F%AC%EC%98%A4%EA%B8%B0\" aria-label=\"1 스크립트 및 파일 불러오기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 스크립트 및 파일 불러오기</h2>\n<p>어플리케이션의 크기가 커지면 이를 파일로 분리해야한다. 이 때 이 파일을 모듈(module)이라고 한다. 브라우저 환경에서 일반 스크립트가 아닌 모듈 단위의 파일을 사용하기 위해서는 다음과 같이 작성해야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">index<span class=\"token punctuation\">.</span>html\n\n<span class=\"token comment\">//...</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">커피캣 스토어</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>styles.css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>index.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>module<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">defer</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n//...</span></code></pre></div>\n<p>여기서 <code class=\"language-text\">defer</code> 를 작성하여 모듈 로드가 HTML 파싱 과정을 멈추지않게 해주었고 DOM 이 준비된 후에 해당 모듈이 실행되도록 해주었다.</p>\n<p>이제 파일 내에서도 다른 모듈을 가져와보자. 다음 코드는 어플리케이션의 <code class=\"language-text\">entry</code> 포인트인 <code class=\"language-text\">index.js</code> 에서 <code class=\"language-text\">router</code> 를 가져오는 코드이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// index.js</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> router <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./router/index.js'</span>\n\n<span class=\"token comment\">// router.js</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">router</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'router 실행!'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이 때 주의해야할 점은 확장자명을 명시해줘야한다는 점이다. 이는 브라우저에서 <code class=\"language-text\">import</code> 가 작동하는 방식과 맞추기 위해서 의도적으로 설계된 부분이라고 한다. 그러므로 반드시 경로와 확장자를 명시해줘야 우리가 원하는 파일을 <code class=\"language-text\">import</code> 해올 수 있다.</p>\n<h2 id=\"2-entry-포인트-파일-작성하기\" style=\"position:relative;\"><a href=\"#2-entry-%ED%8F%AC%EC%9D%B8%ED%8A%B8-%ED%8C%8C%EC%9D%BC-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"2 entry 포인트 파일 작성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. entry 포인트 파일 작성하기</h2>\n<p>아마 페이지를 새로 고침해도 console 이 실행되지 않았을 것이다. router 는 함수이기 때문에 호출이 필요하기 때문이다. 언제 router 함수를 실행해야할까?</p>\n<p>크게 2가지 event에 대해 동작하도록 작성해야한다. 먼저 <code class=\"language-text\">DOMContentLoaded</code> 이다. <code class=\"language-text\">DOMContentLoaded</code> 는 초기 HTML 문서를 완전히 불러오고 분석했을 때 발생하는 이벤트이다. 이번 과제의 JS 는 DOM 요소를 조작하는데 사용되고 HTML 문서가 완전히 불러와졌을 때 실행해야한다. 따라서 해당 event 이후에 <code class=\"language-text\">router</code> 함수가 실행되도록 해야한다.</p>\n<p>두 번째는 <code class=\"language-text\">popstate</code> 이벤트이다. popstate 이벤트는 사용자의 세션 기록 탐색으로 인해 현재 활성화된 기록 항목이 발생한다. 즉, 브라우저에서 사용자가 뒤로 가기또는 앞으로 가기 버튼을 클릭했을 때도 원하는 화면을 렌더링하게 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> router <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./router/index.js'</span>\n\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'DOMContentLoaded'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">router</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'popstate'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">router</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"3-라우팅\" style=\"position:relative;\"><a href=\"#3-%EB%9D%BC%EC%9A%B0%ED%8C%85\" aria-label=\"3 라우팅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 라우팅</h2>\n<p>라우팅 처리를 위해서는 작성해야하는 url을 확인해야한다.</p>\n<p>문제에서 나온 url은 총 3가지이다.</p>\n<ul>\n<li>전체 상품 목록 페이지 <code class=\"language-text\">/web/</code></li>\n<li>상품 디테일 페이지 <code class=\"language-text\">/web/products/:productId</code></li>\n<li>장바구니 <code class=\"language-text\">/web/cart</code></li>\n</ul>\n<p>전체 상품 목록 페이지와 장바구니의 url 은 <code class=\"language-text\">pathname</code> 으로만 구성되어있지만 상품 디테일 페이지는 조금 다르다.</p>\n<p>상품 디테일 페이지의 경우에는 <code class=\"language-text\">path variable</code> 이 있다. 이는 상품 아이디에 대한 경로를 지정하기 위해 사용되었다. 이와 유사한 개념으로 <code class=\"language-text\">Query string</code> 이 있다. <code class=\"language-text\">path variable</code> 은 주로 어떤 자원의 위치를 특정해서 보여주는 경우에 사용하고, <code class=\"language-text\">Query string</code> 은 정렬하거나 필터해서 자원을 보여주는 경우에 사용한다.</p>\n<p>과제의 내용 또한 특정 조건에 부합하는 자원을 필터 또는 정렬해서 보여줘야하는 것이 아닌 특정 id 에 대한 상품에 대한 디테일 정보를 보여줘야하기 때문에 <code class=\"language-text\">path variable</code> 을 사용했음을 알 수 있다.</p>\n<p>먼저 <code class=\"language-text\">routes</code> 라는 배열을 만들어준다. 이 배열에는 객체가 담기고, 그 객체는 path 와 view 라는 key 를 갖는다. path 는 문제에서 요구한 경로를 적어주고, view 에는 이후에 생성할 페이지 컴포넌트를 작성한다. 나중에 <code class=\"language-text\">switch-case</code> 를 사용해 경로가 일치한다면 해당 컴포넌트를 렌더링해준다. 지금은 컴포넌트를 작성하지 않았으므로 console 이 동작하도록 작성해주자.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">//router/index.js</span>\n<span class=\"token keyword\">const</span> log <span class=\"token operator\">=</span> console<span class=\"token punctuation\">.</span>log\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">router</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> routes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/web/'</span><span class=\"token punctuation\">,</span> <span class=\"token function-variable function\">view</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ProductList'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/web/products/:productId'</span><span class=\"token punctuation\">,</span> <span class=\"token function-variable function\">view</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ProductDetail'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/web/cart'</span><span class=\"token punctuation\">,</span> <span class=\"token function-variable function\">view</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Cart'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 브라우저의 url 을 읽어와야한다. url은 아래 그림과 같은 요소들로 이루어져있고 관련해서 설명은 생략하도록 하겠다.</p>\n<div align=\"center\">\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABsklEQVQoz0WSa28SQRSG+etN/NBo+kVbSUzrFbVRShNTraltYsUWUMBiU6CLXIrQ7LLsbZbZC5c8zoLRD28mk/POk/ecMylbBNiexFmeAZYrCaKAzkBSvPBxhcSLQvQbQbdsY3kTxCTG9cPVu0Qyxvl7T/2HyaUSmNabkDsSdH5LhIINNQ/txEQfCmQ4p2foZEuHGJaDNwPz/AyzXMFRtZTlTv7BHJWmWvc5+CyUecIklCqVRevLmMTnhzHXgz5PTt/S6HdxFWBUKGDs72GP3WWwlIzmiGBKGE9p9qaclGJsEeNHM247Id2Co+pJixFSzmkbA7TbPmG0WHrcoY6nQJ6crlouV2tcNVr86t6Q2avz8FmdnTcD0pkO6acN8rttSq9b5B83+f5R46ie5VB7Qa6+zafiAe3dLK30Ft1cbjnHVP6syOnXcwW9ZudVjbWNb9xNX7G+9ZP1BxXeb9Y43rzg+P4lpXdN9qrbvPyxwfPKPT7kszTTj7i8s0Y7k1kBZayiq5YTGfacwWjBcDRTmjM0F5iGWtgoxDJCXCfC9B10z8QQY7wgQJhqMbqJa9okP+YPB1P3P1/mtz0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"URL\" title=\"URL\" src=\"/static/296119a0d805bca7da406330fb0de9a6/c1b63/URL.png\" srcset=\"/static/296119a0d805bca7da406330fb0de9a6/5a46d/URL.png 300w,\n/static/296119a0d805bca7da406330fb0de9a6/0a47e/URL.png 600w,\n/static/296119a0d805bca7da406330fb0de9a6/c1b63/URL.png 1200w,\n/static/296119a0d805bca7da406330fb0de9a6/b67f3/URL.png 1338w\" sizes=\"(max-width: 1200px) 100vw, 1200px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n</div>\n<br>\n<p>우리는 결국 pathname에 대한 접근이 필요하고 <code class=\"language-text\">location.pathname</code> 을 통해서 읽어올 수 있다. 읽어온 url 은 정규표현식을 사용해서 읽어오자. 동적으로 정규표현식을 생성해줘야하기 때문에 정규표현식 생성자를 사용하자. 정규표현식을 사용하지 않고 Web API 에서 제공하는 URL 객체를 활용할 수도 있다. 이번 설명에서는 정규표현식을 사용하도록 하겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">pathToRegex</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">path</span> <span class=\"token operator\">=></span>\n  <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token string\">'^'</span> <span class=\"token operator\">+</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\/</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'\\\\/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">:\\w+</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'(.+)'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">'$'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>이제 routes 라는 배열을 map 으로 순회해서 각자 생성한 정규표현식에 일치한다면 isMatch 라는 키에 true 를 가질 수 있도록 작성해주자.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">pathToRegex</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">path</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"^\"</span> <span class=\"token operator\">+</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\/</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\\\\/\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">:\\w+</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"(.+)\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"$\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">router</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> routes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/web/'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">view</span><span class=\"token operator\">:</span> ProductList<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/web/products/:productId'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">view</span><span class=\"token operator\">:</span> ProductDetail<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/web/cart'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">view</span><span class=\"token operator\">:</span> Cart<span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n\n    <span class=\"token keyword\">const</span> pageMatches <span class=\"token operator\">=</span> routes<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">route</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\troute<span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">isMatch</span><span class=\"token operator\">:</span> location<span class=\"token punctuation\">.</span>pathname<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token function\">pathToRegex</span><span class=\"token punctuation\">(</span>route<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//...</span></code></pre></div>\n<p>기본으로 접근할 수 있는 <code class=\"language-text\">/web/</code> pathname 에 접근한다면 배열의 첫 번째 index 에서만 <code class=\"language-text\">isMatch true</code> 값을 가질 것이다.</p>\n<p>이제 일치하는 url 을 갖는 route 객체를 match 라는 변수에 저장해주자. 그리고 만약 일치하는 url이 존재하지 않는다면 match 에 기본 url을 재할당해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> match <span class=\"token operator\">=</span> pageMatches<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">pageMatch</span> <span class=\"token operator\">=></span> pageMatch<span class=\"token punctuation\">.</span>isMatch<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>match<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  match <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">route</span><span class=\"token operator\">:</span> routes<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">isMatch</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>저장하고 있는 url 중 하나에 일치하는 경우에는 위에서 routes 의 값으로 저장한 view 를 호출해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>match<span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">case</span> <span class=\"token string\">'/web/'</span><span class=\"token operator\">:</span>\n    match<span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">.</span><span class=\"token function\">view</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">break</span>\n  <span class=\"token keyword\">case</span> <span class=\"token string\">'/web/products/:productId'</span><span class=\"token operator\">:</span>\n    match<span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">.</span><span class=\"token function\">view</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">break</span>\n  <span class=\"token keyword\">case</span> <span class=\"token string\">'/web/cart'</span><span class=\"token operator\">:</span>\n    match<span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">.</span><span class=\"token function\">view</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">break</span>\n  <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n    <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'default'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위에서 작성했던 콘솔 함수가 호출될 것이다. 다음은 이 글에서 다룬 <code class=\"language-text\">router</code> 코드이다. 컴포넌트를 설계하고 다시 작성해야한다.</p>\n<h2 id=\"4-임시-완성-router-code\" style=\"position:relative;\"><a href=\"#4-%EC%9E%84%EC%8B%9C-%EC%99%84%EC%84%B1-router-code\" aria-label=\"4 임시 완성 router code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 임시 완성 router code</h2>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">pathToRegex</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">path</span> <span class=\"token operator\">=></span>\n  <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token string\">'^'</span> <span class=\"token operator\">+</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\/</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'\\\\/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">:\\w+</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'(.+)'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">'$'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> log <span class=\"token operator\">=</span> console<span class=\"token punctuation\">.</span>log\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">router</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> routes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/web/'</span><span class=\"token punctuation\">,</span> <span class=\"token function-variable function\">view</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ProductList'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/web/products/:productId'</span><span class=\"token punctuation\">,</span> <span class=\"token function-variable function\">view</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ProductDetail'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/web/cart'</span><span class=\"token punctuation\">,</span> <span class=\"token function-variable function\">view</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Cart'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n\n  <span class=\"token keyword\">const</span> pageMatches <span class=\"token operator\">=</span> routes<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">route</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      route<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">isMatch</span><span class=\"token operator\">:</span> location<span class=\"token punctuation\">.</span>pathname<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token function\">pathToRegex</span><span class=\"token punctuation\">(</span>route<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">let</span> match <span class=\"token operator\">=</span> pageMatches<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">pageMatch</span> <span class=\"token operator\">=></span> pageMatch<span class=\"token punctuation\">.</span>isMatch<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>match<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    match <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">route</span><span class=\"token operator\">:</span> routes<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">isMatch</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>match<span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'/web/'</span><span class=\"token operator\">:</span>\n      match<span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">.</span><span class=\"token function\">view</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">break</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'/web/products/:productId'</span><span class=\"token operator\">:</span>\n      match<span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">.</span><span class=\"token function\">view</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">break</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'/web/cart'</span><span class=\"token operator\">:</span>\n      match<span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">.</span><span class=\"token function\">view</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">break</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'default'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">return</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>다음 포스팅에서는 <code class=\"language-text\">util</code> 함수들과 <code class=\"language-text\">컴포넌트</code> 설계에 대한 내용을 다루려고 한다.</p>","frontmatter":{"title":"2021 하반기 프로그래머스 과제리뷰","date":"March 10, 2022"}}},"pageContext":{"slug":"/FrontEnd/2021 하반기 프로그래머스 과제리뷰(1)/","previous":{"fields":{"slug":"/FrontEnd/에러핸들링/"},"frontmatter":{"title":"에러 핸들링"}},"next":null}},"staticQueryHashes":["2486386679","3128451518"]}